<script>
document.addEventListener("DOMContentLoaded", () => {

  const form = document.querySelector("#forgetPasswordForm");
  if (!form) return;

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const data = {};
    formData.forEach((value, key) => data[key] = value);

    try {
      const response = await fetch(form.action, {
        method: form.method,
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const res = await response.json();

      if (res.success) {
        Swal.fire({
          icon: "success",
          title: "Success",
          text: res.message,
          confirmButtonColor: "#3085d6"
        });
      } else {
        Swal.fire({
          icon: "error",
          title: "Error",
          text: res.message || "Something went wrong",
          confirmButtonColor: "#d33"
        });
      }

    } catch (err) {
      Swal.fire({
        icon: "error",
        title: "Error",
        text: "Something went wrong. Try again.",
        confirmButtonColor: "#d33"
      });
    }
  });

});

document.addEventListener("DOMContentLoaded", () => {

  const form = document.querySelector("#resetPasswordForm");
  if (!form) return;

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const formData = new FormData(form);
    const data = {};
    formData.forEach((value, key) => data[key] = value);

    try {
      const response = await fetch(form.action, {
        method: form.method,
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const res = await response.json();

      if (res.success) {
        Swal.fire({
          icon: "success",
          title: "Success",
          text: res.message,
          confirmButtonColor: "#3085d6"
        }).then(() => {
          // optional redirect after success
          window.location.href = "/loginpage";
        });
      } else {
        Swal.fire({
          icon: "error",
          title: "Error",
          text: res.message || "Something went wrong",
          confirmButtonColor: "#d33"
        });
      }

    } catch (err) {
      Swal.fire({
        icon: "error",
        title: "Error",
        text: "Something went wrong. Try again.",
        confirmButtonColor: "#d33"
      });
    }
  });

});


</script>